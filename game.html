<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mobility Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body data-page="game">
    <header class="topbar">
      <a href="index.html" id="btn-home" class="icon-btn left" title="Homepage" data-i18n-title="game.home" aria-label="homepage"></a>
      <div class="right">
        <button id="btn-identity" class="icon-btn" aria-label="identity cards" aria-haspopup="dialog" aria-controls="modal-identity" title="Identity" data-i18n-title="game.identity"></button>
        <button id="btn-info" class="icon-btn" aria-label="info" aria-haspopup="dialog" aria-controls="modal-info" title="Info" data-i18n-title="game.help"></button>
      </div>
    </header>

    <main class="game">
      <div id="active-identity" class="identity-pill" hidden></div>
      <section class="dice-list" id="dice-list">
        <!-- Buttons injected by JS for 4 dice -->
      </section>
    </main>

    <!-- Modals -->
    <dialog id="modal-identity" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <div class="identity-hero">
          <div class="sprite image" id="identity-hero-image" aria-hidden="true"></div>
        </div>
        <h2 data-i18n="identity.title">Play with identity cards?</h2>
        <p data-i18n="identity.desc">Identity cards let you role-play (e.g., young, elderly, person with disabilities) to reflect diverse mobility needs.</p>
        <div class="modal-actions">
          <button value="dismiss" class="secondary" data-i18n="common.dismiss">Dismiss</button>
          <button value="no" class="danger" data-i18n="common.no">No</button>
          <button value="yes" class="primary" data-i18n="common.yes">Yes</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-help" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <div class="help-hero">
          <div class="sprite image" id="help-hero-image" aria-hidden="true"></div>
        </div>
        <h2 data-i18n="help.title">How to play</h2>
        <p data-i18n="help.desc">Choose a die, roll it, then follow the board steps and note emissions. Use points/challenge if you land on those spaces.</p>
        <p data-i18n="help.descDie">Some dice let you move far in a single turn but produce a lot of emissions. You may choose any die, unless your identity card forbids it or a challenge card restricts your choice.</p>
        <div class="modal-actions">
          <button class="primary" value="ok" data-i18n="common.dismiss">Dismiss</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-info" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <div class="info-hero">
          <div class="sprite image" id="info-hero-image" aria-hidden="true"></div>
        </div>
        <h2 data-i18n="info.title">About us</h2>
        <p data-i18n="info.desc"></p>
        <p><b>Ersteller / Creator:</b><br/> Jonathan Latour & Philipp Herzog</p>
        <p><b>Redaktion / Editors:</b><br/> Hirut Grossberger, Pamela Nolz, Susanne Binder, Victor-Adriel De-Jesus-Oliveira, Zora Heis, Ana-Klarissa Breitkopf</p>
        <p><b>Illustrationen / Illustrations:</b><br/> Ana-Klarissa Breitkopf</p>
        <p><b>Companion App:</b><br/> Victor-Adriel De-Jesus-Oliveira</p>

        <div class="modal-actions">
          <button class="secondary" value="ok" data-i18n="common.dismiss">Dismiss</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-dice" class="modal wide" aria-modal="true">
      <form method="dialog" class="modal-card dice">
        <div class="dice-hero">
          <div class="sprite image" id="dice-hero-image" aria-hidden="true"></div>
        </div>
        <p id="dice-small-text" class="small" data-i18n="dice.small">Roll to see your mobility action!</p>
        <div class="dice-roller">
          <div class="cube" id="dice-cube">
            <div class="face front"></div>
            <div class="face back"></div>
            <div class="face right"></div>
            <div class="face left"></div>
            <div class="face top"></div>
            <div class="face bottom"></div>
          </div>
        </div>
        <p class="cta" id="dice-cta" data-i18n="dice.cta" aria-live="polite"></p>
        <div class="modal-actions">
          <button id="dice-next" class="primary" value="next" data-i18n="common.next">Next</button>
        </div>
        <div class="dice-step" id="dice-step" hidden>
          <!-- Landing options after next -->
        </div>
      </form>
    </dialog>

    <dialog id="modal-landing" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="landingOptions.title">Did you land on a special field?</h2>
        <div class="landing-options">
          <button id="landing-points" value="points" class="option points" data-i18n="landingOptions.points">Points</button>
          <button id="landing-challenge" value="challenge" class="option challenge" data-i18n="landingOptions.challenge">Challenge</button>
        </div>
        <div class="modal-actions">
          <button class="secondary" value="no" data-i18n="common.no">No</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-points" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="points.title">Add points</h2>
        <label>
          <span data-i18n="points.hint">How many points?</span>
          <input id="points-input" type="number" inputmode="numeric" min="0" step="1" />
        </label>
        <div class="modal-actions">
          <button class="secondary" id="points-cancel" value="cancel" data-i18n="common.cancel">Cancel</button>
          <button class="primary" id="points-done" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-emissions" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="emissions.title">Edit emissions</h2>
        <label>
          <span data-i18n="emissions.hint">Add or remove emissions:</span>
          <input id="emissions-input" type="number" inputmode="numeric" min="0" step="1" />
        </label>
        <div class="modal-actions">
          <button class="secondary" id="emissions-cancel" value="cancel" data-i18n="common.cancel">Cancel</button>
          <button class="primary" id="emissions-done" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-steps" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="steps.title">Edit steps</h2>
        <label>
          <span data-i18n="steps.hint">How many steps have you moved?</span>
          <input id="steps-input" type="number" inputmode="numeric" min="0" step="1" />
        </label>
        <div class="modal-actions">
          <button class="secondary" id="steps-cancel" value="cancel" data-i18n="common.cancel">Cancel</button>
          <button class="primary" id="steps-done" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-final" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="final.title">Final Points</h2>
        <span data-i18n="final.hint">For each 3 emissions, you lose a point.</span>
        <div class="final-options">
          <div id="final-points" class="option points">0</div>
          <div id="final-emissions" class="option emissions">0</div>
          <div id="final-final" class="option final">0</div>
        </div>
        <div class="modal-actions">
          <button class="secondary" id="final-cancel" value="cancel" data-i18n="common.cancel">Cancel</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-challenge" class="modal" aria-modal="true">
      <form method="dialog" class="modal-card">
        <div class="challenge-hero">
          <div class="sprite image" id="challenge-hero-image" aria-hidden="true"></div>
        </div>
        <h2 data-i18n="challenge.title">Challenge</h2>
        <p id="challenge-text">...</p>
        
        <div class="modal-actions challenge">
          <button id="challenge-points" class="secondary" value="points" data-i18n="stats.points">Points</button>
          <button id="challenge-emissions" class="secondary" value="emissions" data-i18n="stats.emissions">Emissions</button>
          <button id="challenge-steps" class="secondary" value="steps" data-i18n="stats.steps">Steps</button>
        </div>
        <div class="modal-actions">
          <button id="challenge-done" class="primary" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <!-- Bottom sheet -->
    <section id="bottom-sheet" class="sheet" aria-label="Stats panel" aria-expanded="false">
      <div class="handle" id="sheet-handle" tabindex="0" role="button" aria-grabbed="false" aria-label="Expand bottom sheet"></div>
      <div class="sheet-content">
        <div class="stats">
          <button id="stat-points" class="stat">
            <div class="label" data-i18n="stats.points">Points</div>
            <div class="value" id="stat-points-value">0</div>
          </button>
          <div id="stat-challenges" class="stat">
            <div class="label" data-i18n="stats.challenges">Challenges</div>
            <div class="value" id="stat-challenges-value">0</div>
          </div>
          <button id="stat-emissions" class="stat">
            <div class="label" data-i18n="stats.emissions">Emissions</div>
            <div class="value" id="stat-emissions-value">0</div>
          </button>
          <button id="stat-steps" class="stat">
            <div class="label" data-i18n="stats.steps">Steps</div>
            <div class="value" id="stat-steps-value">0</div>
          </button>
        </div>
        <canvas id="emissions-chart" height="160"></canvas>
        <div class="sheet-footer">
          <div>
            <button id="btn-reset" class="danger" data-i18n="stats.reset">Reset</button>
            <button id="btn-download" class="secondary" aria-label="download game data">📥</button>
          </div>          
          <button id="btn-final" class="primary" data-i18n="stats.final">Final Points</button>
        </div>
      </div>
    </section>

    <script src="js/app.js"></script>
  </body>
  </html>


