<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mobility Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body data-page="game">
    <header class="topbar">
      <button id="btn-identity" class="icon-btn left" aria-haspopup="dialog" aria-controls="modal-identity" title="Identity" data-i18n-title="game.identity">
        <span class="icon">ü™™</span>
      </button>
      <button id="btn-help" class="icon-btn right" aria-haspopup="dialog" aria-controls="modal-help" title="Help" data-i18n-title="game.help">
        <span class="icon">‚ùî</span>
      </button>
    </header>

    <main class="game">
      <div id="active-identity" class="identity-pill" hidden></div>
      <section class="dice-list" id="dice-list">
        <!-- Buttons injected by JS for 4 dice -->
      </section>
    </main>

    <!-- Modals -->
    <dialog id="modal-identity" class="modal">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="identity.title">Play with identity cards?</h2>
        <p data-i18n="identity.desc">Identity cards let you role-play (e.g., young, elderly, person with disabilities) to reflect diverse mobility needs.</p>
        <div class="modal-actions">
          <button value="no" class="secondary" data-i18n="common.no">No</button>
          <button value="yes" class="primary" data-i18n="common.yes">Yes</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-help" class="modal">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="help.title">How to play</h2>
        <p data-i18n="help.desc">Choose a die, roll it, then follow the board steps and note emissions. Use points/challenge if you land on those spaces.</p>
        <div class="modal-actions">
          <button class="primary" value="ok" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-dice" class="modal wide">
      <form method="dialog" class="modal-card dice">
        <div class="dice-hero">
          <div class="sprite image" id="dice-hero-image" aria-hidden="true"></div>
        </div>
        <p id="dice-small-text" class="small" data-i18n="dice.small">Roll to see your mobility action!</p>
        <div class="dice-roller">
          <div class="cube" id="dice-cube">
            <div class="face front"></div>
            <div class="face back"></div>
            <div class="face right"></div>
            <div class="face left"></div>
            <div class="face top"></div>
            <div class="face bottom"></div>
          </div>
        </div>
        <p class="cta" id="dice-cta" data-i18n="dice.cta">Tap the die to roll</p>
        <div class="modal-actions">
          <button id="dice-next" class="primary" value="next" data-i18n="common.next">Next</button>
        </div>
        <div class="dice-step" id="dice-step" hidden>
          <!-- Landing options after next -->
        </div>
      </form>
    </dialog>

    <dialog id="modal-landing" class="modal">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="landingOptions.title">Did you land on a special field?</h2>
        <div class="landing-options">
          <button id="landing-points" value="points" class="option points" data-i18n="landingOptions.points">Points</button>
          <button id="landing-challenge" value="challenge" class="option challenge" data-i18n="landingOptions.challenge">Challenge</button>
        </div>
        <div class="modal-actions">
          <button class="secondary" value="no" data-i18n="common.no">No</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-points" class="modal">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="points.title">Add points</h2>
        <label>
          <span data-i18n="points.hint">How many points?</span>
          <input id="points-input" type="number" inputmode="numeric" min="0" step="1" />
        </label>
        <div class="modal-actions">
          <button class="primary" id="points-done" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <dialog id="modal-challenge" class="modal">
      <form method="dialog" class="modal-card">
        <h2 data-i18n="challenge.title">Challenge</h2>
        <p id="challenge-text">...</p>
        <div class="modal-actions two">
          <button id="challenge-points" class="secondary" value="points" data-i18n="challenge.points">Points</button>
          <button id="challenge-done" class="primary" value="done" data-i18n="common.done">Done</button>
        </div>
      </form>
    </dialog>

    <!-- Bottom sheet -->
    <section id="bottom-sheet" class="sheet" aria-label="Stats panel" aria-expanded="false">
      <div class="handle" id="sheet-handle" tabindex="0" aria-grabbed="false"></div>
      <div class="sheet-content">
        <div class="stats">
          <button id="stat-points" class="stat">
            <div class="label" data-i18n="stats.points">Points</div>
            <div class="value" id="stat-points-value">0</div>
          </button>
          <div class="stat">
            <div class="label" data-i18n="stats.challenges">Challenges</div>
            <div class="value" id="stat-challenges-value">0</div>
          </div>
        </div>
        <canvas id="emissions-chart" height="160"></canvas>
        <div class="sheet-footer">
          <button id="btn-reset" class="danger" data-i18n="stats.reset">Reset</button>
          <button id="btn-download" class="secondary" data-i18n="stats.download">Download CSV</button>
        </div>
      </div>
    </section>

    <script src="js/app.js"></script>
  </body>
  </html>


